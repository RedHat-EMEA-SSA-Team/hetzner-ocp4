---

openshift_install_dir: "{{ playbook_dir }}/../{{ cluster_name }}"
ssh_public_key_location: /root/.ssh/id_rsa

vn_subnet: "192.168.50.0"
vn_name: "openshift-4-cluster"
vn_internal_domain: "compute.local"
vn_public_domain: "h42.openshift.pub"

#
ip_families:
  - IPv4

listen_address: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] | default('') }}"
listen_address_ipv6: "{{ hostvars['localhost']['ansible_default_ipv6']['address'] | default('') }}"

master_count: 3
master_vcpu: 4
master_memory_size: 16384
master_memory_unit: 'MiB'
# qemu-img image size specified.
#   You may use k, M, G, T, P or E suffixe
master_root_disk_size: '120G'

compute_count: 3
compute_vcpu: 2
compute_memory_size: 8192
compute_memory_unit: 'MiB'
# qemu-img image size specified.
#   You may use k, M, G, T, P or E suffixe
compute_root_disk_size: '120G'

vm_autostart: false

# Important: OpenShift version must match to RHEL CoreOS version!

# reference to OpenShift version
openshift_version: 4.8.2
openshift_install_command: "/opt/openshift-install-{{ openshift_version }}/openshift-install"
# dev-pre:
# {{ openshift_mirror }}/pub/openshift-v4/clients/ocp-dev-preview

# reference to OpenShift clients version
openshift_client_version: "{{ openshift_version }}"

openshift_mirror: "https://mirror.openshift.com"

openshift_location: "{{ openshift_mirror }}/pub/openshift-v4/clients/ocp/{{openshift_client_version}}"

opm_version: "{{ openshift_client_version }}"
opm_download_url: "{{ openshift_location }}/opm-linux-{{ opm_version }}.tar.gz"
opm_dest: "/opt/openshift-client-{{ openshift_client_version }}/"

# reference to coreos qcow file
coreos_version: 4.8.2
coreos_download_url: "{{ openshift_mirror }}/pub/openshift-v4/dependencies/rhcos/{{ coreos_version.split('.')[:2]|join('.') }}/{{ coreos_version }}/rhcos-{{coreos_version}}-x86_64-qemu.x86_64.qcow2.gz"
coreos_csum_url: "{{ openshift_mirror }}/pub/openshift-v4/dependencies/rhcos/{{ coreos_version.split('.')[:2]|join('.') }}/{{ coreos_version }}/sha256sum.txt"

# you can check available version numbers from here:
# {{ openshift_mirror }}/pub/openshift-v4/dependencies/rhcos/
coreos_path: /var/lib/libvirt/images
coreos_file: "{{ coreos_download_url | basename | regex_search('.*qcow2') }}"
coreos_image_location: "{{ coreos_path }}/{{ coreos_file }}"

certificates_dir: "{{ playbook_dir }}/../certificate"
certficate_fullchain: "{{ certificates_dir }}/{{ cluster_name }}.{{ public_domain }}/fullchain.crt"
certficate_key: "{{ certificates_dir }}/{{ cluster_name }}.{{ public_domain }}/cert.key"
# Default production directory
# Production directory: https://acme-v02.api.letsencrypt.org/directory
# Staging directory: "https://acme-staging-v02.api.letsencrypt.org/directory"
letsencrypt_directory: "https://acme-v02.api.letsencrypt.org/directory"
# By default letsencrypt is enabled.
letsencrypt_disabled: false
# helm
helm_cli_location: "{{ openshift_mirror }}/pub/openshift-v4/clients/helm/latest/helm-linux-amd64"

butane_cli_location: "{{ openshift_mirror }}/pub/openshift-v4/clients/butane/latest/butane-amd64"


# NFS Storage
#  storage_nfs do not support multi cluster support, it overwrites the
#  /etc/exports
storage_nfs: false
storage_nfs_path_prefix: '/var/lib/libvirt/images'
storage_nfs_target_namespace: openshift-nfs-provisioner

# sdn plugin
sdn_plugin_name: OVNKubernetes

# Master node schedulable
masters_schedulable: true

add_ons_enabled: false


# ipv4 - ipv6 network variable
# used in ansible/roles/openshift-4-cluster/templates/install-config.yaml.j2

networking_clusternetwork_cidr_ipv4: "10.128.0.0/14"
networking_clusternetwork_hostprefix_ipv4: "23"

networking_clusternetwork_cidr_ipv6: "fd02::/48"
networking_clusternetwork_hostprefix_ipv6: 64
## cluster network host subnetwork prefix must be 64 for IPv6 networks

networking_servicenetwork_cidr_ipv4: "172.30.0.0/16"
networking_servicenetwork_cidr_ipv6: 'fd03::/112'

# vnet_subnetxxxx is calculated in ansible/roles/openshift-4-cluster/tasks/create-network.yml
networking_machinenetwork_cidr_ipv4: "{{ vn_subnet }}/24"
networking_machinenetwork_cidr_ipv6: "{{ vn_subnet_ipv6 }}::/80"


